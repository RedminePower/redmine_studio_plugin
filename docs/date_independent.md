# Date Independent

親チケットの開始日・期日を子チケットから独立させる機能です。

## 概要

Redmine の「管理」>「設定」>「チケットトラッキング」には、親チケットの日付（開始日・期日）の算出方法を設定するオプションがあります。

| 設定値 | 動作 |
|--------|------|
| 子チケットの値から算出 | 親チケットの日付は子チケットの日付から自動計算される |
| 独立 | 親チケットの日付は子チケットと無関係に設定できる |

「子チケットの値から算出」を選択すると、子チケットの最も早い開始日が親の開始日に、最も遅い期日が親の期日に自動設定されます。この設定は **システム全体に適用されるため、プロジェクトごとに挙動を変えることはできない** という問題点があります。

本機能は、この制限を解消します。システム全体では「子チケットの値から算出」を維持しつつ、特定のプロジェクトのみ独立させることができます。また、独立させたプロジェクトでも、特定のステータス（例：終了）のチケットは連動を維持するといった細かな制御が可能です。

### ユースケース

**マイルストーンチケットの管理:**
- リリース日が先に決まっているプロジェクトでは、親チケット（マイルストーン）の期日を固定したい
- しかし、子チケットの作業見積もりは変動するため、親が自動更新されると困る

**複数プロジェクトでの運用:**
- 開発プロジェクトでは子チケットから日付を算出したい
- 管理プロジェクトでは手動で日付を設定したい
- 本機能で管理プロジェクトのみ独立させることで、両立可能

**終了チケットの扱い:**
- 通常は独立させたいが、終了したチケットは子チケットの実績を反映させたい
- 「適用しないステータス」に「終了」を設定することで実現可能

## 管理画面

管理者メニューの「開始日/期日の独立」からルールの作成・編集・削除ができます。

## 設定項目

### 基本設定

| 項目 | 説明 |
|------|------|
| タイトル | 管理上わかりやすい名前を設定（必須） |
| 有効 | ルールの有効/無効を切り替え |
| 対象プロジェクト | 独立させるプロジェクトを選択（必須・複数選択可） |
| 適用しないステータス | 独立を適用せず、連動を維持するステータスを指定（複数選択可）。未指定の場合はステータスによる例外なし |

### 動作の詳細

本機能の動作ロジックは以下のとおりです。

```
1. システム設定が「子チケットの値から算出」以外の場合
   → 本機能は動作しない（システム設定に従う）

2. チケットのプロジェクトが「対象プロジェクト」に含まれない場合
   → 通常どおり連動する

3. チケットのプロジェクトが「対象プロジェクト」に含まれる場合
   3-1. 「適用しないステータス」が未設定
        → 独立する（連動しない）
   3-2. チケットのステータスが「適用しないステータス」に含まれる
        → 連動する
   3-3. チケットのステータスが「適用しないステータス」に含まれない
        → 独立する（連動しない）
```

### 設定例

**例1: 特定プロジェクトを完全に独立させる**

| 項目 | 設定値 |
|------|--------|
| タイトル | 管理プロジェクト独立 |
| 有効 | チェック |
| 対象プロジェクト | 管理プロジェクト |
| 適用しないステータス | （空） |

→ 管理プロジェクトの親チケットは、子チケットの日付に関係なく独自の日付を設定できます。

**例2: 終了チケットのみ連動させる**

| 項目 | 設定値 |
|------|--------|
| タイトル | 開発プロジェクト（終了時は連動） |
| 有効 | チェック |
| 対象プロジェクト | 開発プロジェクト |
| 適用しないステータス | 終了、却下 |

→ 開発プロジェクトの親チケットは通常は独立していますが、ステータスが「終了」または「却下」になると子チケットの日付から算出されます。

## 注意事項

- 本機能はシステム設定の「親チケットの日付」が「子チケットの値から算出」の場合にのみ動作します
- ルールを無効にすると、該当プロジェクトはシステム設定に従って連動するようになります
